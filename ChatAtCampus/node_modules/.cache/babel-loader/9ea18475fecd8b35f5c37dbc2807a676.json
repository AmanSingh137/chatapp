{"ast":null,"code":"var _jsxFileName = \"C:\\\\ReactJS\\\\dummy_project_react\\\\ChatAtCampus\\\\src\\\\components\\\\PostSend.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useRef } from \"react\";\nimport firebase from \"firebase/compat/app\";\nimport styles from \"../css/PostSend.module.css\";\nimport { auth, db } from \"../firebase\"; // import { useSelector } from \"react-redux\";\n\nimport { useAuthState } from \"react-firebase-hooks/auth\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction PostSend() {\n  _s();\n\n  // const { user } = useSelector((store) => store.auth);\n  const [user] = useAuthState(auth);\n  const ref = useRef();\n  const [currentImage, setCurrImage] = useState(null);\n  const [caption, setCaption] = useState(\"\");\n\n  const submitHandler = async e => {\n    e.preventDefault();\n\n    if (caption !== \"\") {\n      await db.collection(\"posts\").add({\n        caption,\n        photo: currentImage,\n        creatorName: user === null || user === void 0 ? void 0 : user.username,\n        // uid,\n        createdAt: firebase.firestore.FieldValue.serverTimestamp()\n      });\n\n      if (ref.current.value) {\n        ref.current.value = null;\n      }\n\n      setCurrImage(null);\n      setCaption(\"\");\n    }\n  };\n\n  const uploadImage = async e => {\n    const file = e.target.files[0];\n    const base64 = await convertBase64(file);\n    setCurrImage(base64);\n  };\n\n  const convertBase64 = file => {\n    return new Promise((resolve, reject) => {\n      const fileReader = new FileReader();\n      fileReader.readAsDataURL(file);\n\n      fileReader.onload = () => {\n        resolve(fileReader.result);\n      };\n\n      fileReader.onerror = error => {\n        reject(error);\n      };\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.post_container,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.post_header,\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        src: \"https://images.pexels.com/photos/3094799/pexels-photo-3094799.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.post_header_txt,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.post_input,\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            placeholder: \"Say Something\",\n            onChange: e => {\n              setCaption(e.target.value);\n            },\n            value: caption\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 61,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.post_react,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.post_react_container,\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          ref: ref,\n          onChange: uploadImage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.post_react_container,\n        onClick: submitHandler,\n        children: \"Submit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 5\n  }, this);\n}\n\n_s(PostSend, \"ZQTbEGzI0ReixNrnsc7dgl4ZvIc=\", false, function () {\n  return [useAuthState];\n});\n\n_c = PostSend;\nexport default PostSend;\n\nvar _c;\n\n$RefreshReg$(_c, \"PostSend\");","map":{"version":3,"names":["React","useState","useEffect","useRef","firebase","styles","auth","db","useAuthState","PostSend","user","ref","currentImage","setCurrImage","caption","setCaption","submitHandler","e","preventDefault","collection","add","photo","creatorName","username","createdAt","firestore","FieldValue","serverTimestamp","current","value","uploadImage","file","target","files","base64","convertBase64","Promise","resolve","reject","fileReader","FileReader","readAsDataURL","onload","result","onerror","error","post_container","post_header","post_header_txt","post_input","post_react","post_react_container"],"sources":["C:/ReactJS/dummy_project_react/ChatAtCampus/src/components/PostSend.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\r\nimport firebase from \"firebase/compat/app\";\r\nimport styles from \"../css/PostSend.module.css\";\r\nimport { auth, db } from \"../firebase\";\r\n// import { useSelector } from \"react-redux\";\r\nimport { useAuthState } from \"react-firebase-hooks/auth\";\r\n\r\nfunction PostSend() {\r\n  // const { user } = useSelector((store) => store.auth);\r\n  const [user] = useAuthState(auth);\r\n  const ref = useRef();\r\n  const [currentImage, setCurrImage] = useState(null);\r\n  const [caption, setCaption] = useState(\"\");\r\n\r\n  const submitHandler = async (e) => {\r\n    e.preventDefault();\r\n    if (caption !== \"\") {\r\n      await db.collection(\"posts\").add({\r\n        caption,\r\n        photo: currentImage,\r\n        creatorName: user?.username,\r\n        // uid,\r\n        createdAt: firebase.firestore.FieldValue.serverTimestamp(),\r\n      });\r\n\r\n      if (ref.current.value) {\r\n        ref.current.value = null;\r\n      }\r\n      setCurrImage(null);\r\n      setCaption(\"\");\r\n    }\r\n  };\r\n\r\n  const uploadImage = async (e) => {\r\n    const file = e.target.files[0];\r\n    const base64 = await convertBase64(file);\r\n    setCurrImage(base64);\r\n  };\r\n  const convertBase64 = (file) => {\r\n    return new Promise((resolve, reject) => {\r\n      const fileReader = new FileReader();\r\n      fileReader.readAsDataURL(file);\r\n\r\n      fileReader.onload = () => {\r\n        resolve(fileReader.result);\r\n      };\r\n\r\n      fileReader.onerror = (error) => {\r\n        reject(error);\r\n      };\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className={styles.post_container}>\r\n      <div className={styles.post_header}>\r\n        <img src=\"https://images.pexels.com/photos/3094799/pexels-photo-3094799.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1\"></img>\r\n\r\n        <div className={styles.post_header_txt}>\r\n          <div className={styles.post_input}>\r\n            <input\r\n              placeholder=\"Say Something\"\r\n              onChange={(e) => {\r\n                setCaption(e.target.value);\r\n              }}\r\n              value={caption}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className={styles.post_react}>\r\n        <div className={styles.post_react_container}>\r\n          <input type=\"file\" ref={ref} onChange={uploadImage} />\r\n        </div>\r\n\r\n        {/* <div className={styles.post_react_container}>Video</div> */}\r\n\r\n        <div className={styles.post_react_container} onClick={submitHandler}>\r\n          Submit\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PostSend;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}